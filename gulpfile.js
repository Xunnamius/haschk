/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.build = exports.wpdevserv = exports.cleanTypes = exports.regenerate = void 0;

require("source-map-support/register");

var _fs = require("fs");

var _util = require("util");

var _gulp = _interopRequireDefault(require("gulp"));

var _gulpTap = _interopRequireDefault(require("gulp-tap"));

var _del = _interopRequireDefault(require("del"));

var _fancyLog = _interopRequireDefault(require("fancy-log"));

var _parseGitignore = _interopRequireDefault(require("parse-gitignore"));

var _core = require("@babel/core");

var _path = require("path");

var _webpack = _interopRequireDefault(require("webpack"));

var _webpackDevServer = _interopRequireDefault(require("webpack-dev-server"));

var _webpack2 = _interopRequireDefault(require("./webpack.config"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('dotenv').config();

const {
  NODE_ENV,
  WEBPACK_PORT
} = process.env;
if (typeof WEBPACK_PORT !== 'string') throw new TypeError('WEBPACK_PORT is improperly defined');
const DEV_PORT = parseInt(WEBPACK_PORT, 10);
const DEV_ENV = NODE_ENV === 'development';
const paths = {};
paths.flowTyped = 'flow-typed';
paths.flowTypedGitIgnore = `${paths.flowTyped}/.gitignore`;
paths.configs = 'config';
paths.packageJson = 'package.json';
paths.launchJson = '.vscode/launch.json';
paths.launchJsonDist = '.vscode/launch.dist.json';
paths.env = '.env';
paths.envDist = 'dist.env';
paths.gitProjectDir = '.git';
paths.gitIgnore = '.gitignore';
paths.packageLockJson = 'package-lock.json';
paths.src = `${__dirname}/src`;
paths.build = `${__dirname}/build`;
paths.regenTargets = [`${paths.configs}/*.js`];
const CLI_BANNER = `/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/\n\n`;
const readFileAsync = (0, _util.promisify)(_fs.readFile);

const cleanTypes = async () => {
  const targets = (0, _parseGitignore.default)((await readFileAsync(paths.flowTypedGitIgnore)));
  (0, _fancyLog.default)(`Deletion targets @ ${paths.flowTyped}/: "${targets.join('" "')}"`);
  (0, _del.default)(targets, {
    cwd: paths.flowTyped
  });
};

exports.cleanTypes = cleanTypes;
cleanTypes.description = `Resets the ${paths.flowTyped} directory to a pristine state`;

const regenerate = () => {
  (0, _fancyLog.default)(`Regenerating targets: "${paths.regenTargets.join('" "')}"`);
  process.env.BABEL_ENV = 'generator';
  return _gulp.default.src(paths.regenTargets).pipe((0, _gulpTap.default)(file => file.contents = Buffer.from(CLI_BANNER + (0, _core.transformSync)(file.contents.toString(), {
    sourceFileName: (0, _path.relative)(__dirname, file.path)
  }).code))).pipe(_gulp.default.dest('.'));
};

exports.regenerate = regenerate;
regenerate.description = 'Invokes babel on the files in config, transpiling them into their project root versions';

const build = () => {
  process.env.NODE_ENV = 'production';
  (0, _webpack.default)(_webpack2.default, err => {
    if (err) throw `WEBPACK BUILD ERROR: ${err}`;
  });
};

exports.build = build;
build.description = 'Yields the built extension with an assumed production environment';

const wpdevserv = () => {
  var _config$plugins;

  Object.keys(_webpack2.default.entry).forEach(entryKey => _webpack2.default.entry[entryKey] = [`webpack-dev-server/client?http://0.0.0.0:${DEV_PORT}`, 'webpack/hot/dev-server', _webpack2.default.entry[entryKey]]);
  _webpack2.default.plugins = [new _webpack.default.HotModuleReplacementPlugin(), ...((_config$plugins = _webpack2.default.plugins) !== null && _config$plugins !== void 0 ? _config$plugins : [])];
  const packer = (0, _webpack.default)(_webpack2.default);
  const server = new _webpackDevServer.default(packer, {
    hot: true,
    contentBase: paths.build,
    headers: {
      'Access-Control-Allow-Origin': '*'
    }
  });
  server.listen(DEV_PORT, '0.0.0.0', err => {
    if (err) throw `WEBPACK-DEV-SERVER ERROR: ${err}`;
  });
};

exports.wpdevserv = wpdevserv;
wpdevserv.description = 'Launches the Webpack Development Server for testing purposes';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9ndWxwZmlsZS5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiTk9ERV9FTlYiLCJXRUJQQUNLX1BPUlQiLCJwcm9jZXNzIiwiZW52IiwiVHlwZUVycm9yIiwiREVWX1BPUlQiLCJwYXJzZUludCIsIkRFVl9FTlYiLCJwYXRocyIsImZsb3dUeXBlZCIsImZsb3dUeXBlZEdpdElnbm9yZSIsImNvbmZpZ3MiLCJwYWNrYWdlSnNvbiIsImxhdW5jaEpzb24iLCJsYXVuY2hKc29uRGlzdCIsImVudkRpc3QiLCJnaXRQcm9qZWN0RGlyIiwiZ2l0SWdub3JlIiwicGFja2FnZUxvY2tKc29uIiwic3JjIiwiX19kaXJuYW1lIiwiYnVpbGQiLCJyZWdlblRhcmdldHMiLCJDTElfQkFOTkVSIiwicmVhZEZpbGVBc3luYyIsInJlYWRGaWxlIiwiY2xlYW5UeXBlcyIsInRhcmdldHMiLCJqb2luIiwiY3dkIiwiZGVzY3JpcHRpb24iLCJyZWdlbmVyYXRlIiwiQkFCRUxfRU5WIiwiZ3VscCIsInBpcGUiLCJmaWxlIiwiY29udGVudHMiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJzb3VyY2VGaWxlTmFtZSIsInBhdGgiLCJjb2RlIiwiZGVzdCIsImVyciIsIndwZGV2c2VydiIsIk9iamVjdCIsImtleXMiLCJlbnRyeSIsImZvckVhY2giLCJlbnRyeUtleSIsInBsdWdpbnMiLCJ3ZWJwYWNrIiwiSG90TW9kdWxlUmVwbGFjZW1lbnRQbHVnaW4iLCJwYWNrZXIiLCJzZXJ2ZXIiLCJ3ZWJwYWNrRGV2U2VydmVyIiwiaG90IiwiY29udGVudEJhc2UiLCJoZWFkZXJzIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFTQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVBQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQjs7QUFFQSxNQUFNO0FB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IFRvIHJlZ2VuZXJhdGUgdGhpcyBmaWxlIChpLmUuIGlmIHlvdSBjaGFuZ2VkIGl0IGFuZCB3YW50IHlvdXIgY2hhbmdlcyB0b1xuLy8gPyBiZSBwZXJtYW5lbnQpLCBjYWxsIGBucG0gcnVuIHJlZ2VuZXJhdGVgIGFmdGVyd2FyZHNcblxuLy8gISBCZSBzdXJlIHRoYXQgdGFza3MgZXhwZWN0ZWQgdG8gcnVuIG9uIG5wbSBpbnN0YWxsIChtYXJrZWQgQGRlcGVuZGVudCkgaGF2ZVxuLy8gISBhbGwgcmVxdWlyZWQgcGFja2FnZXMgbGlzdGVkIHVuZGVyIFwiZGVwZW5kZW5jaWVzXCIgaW5zdGVhZCBvZlxuLy8gISBcImRldkRlcGVuZGVuY2llc1wiIGluIHRoaXMgcHJvamVjdCdzIHBhY2thZ2UuanNvblxuXG5pbXBvcnQgeyByZWFkRmlsZSB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAndXRpbCdcbmltcG9ydCBndWxwIGZyb20gJ2d1bHAnXG5pbXBvcnQgdGFwIGZyb20gJ2d1bHAtdGFwJ1xuaW1wb3J0IGRlbCBmcm9tICdkZWwnXG5pbXBvcnQgbG9nIGZyb20gJ2ZhbmN5LWxvZydcbmltcG9ydCBwYXJzZUdpdElnbm9yZSBmcm9tICdwYXJzZS1naXRpZ25vcmUnXG5pbXBvcnQgeyB0cmFuc2Zvcm1TeW5jIGFzIGJhYmVsIH0gZnJvbSAnQGJhYmVsL2NvcmUnXG5pbXBvcnQgeyByZWxhdGl2ZSBhcyByZWxQYXRoIH0gZnJvbSAncGF0aCdcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5pbXBvcnQgd2VicGFja0RldlNlcnZlciBmcm9tICd3ZWJwYWNrLWRldi1zZXJ2ZXInXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vd2VicGFjay5jb25maWcnXG5cbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5jb25zdCB7IE5PREVfRU5WLCBXRUJQQUNLX1BPUlQgfSA9IHByb2Nlc3MuZW52O1xuXG5pZih0eXBlb2YgV0VCUEFDS19QT1JUICE9PSAnc3RyaW5nJylcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdXRUJQQUNLX1BPUlQgaXMgaW1wcm9wZXJseSBkZWZpbmVkJyk7XG5cbmNvbnN0IERFVl9QT1JUID0gcGFyc2VJbnQoV0VCUEFDS19QT1JULCAxMCk7XG5jb25zdCBERVZfRU5WID0gTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbmNvbnN0IHBhdGhzID0ge307XG5cbnBhdGhzLmZsb3dUeXBlZCA9ICdmbG93LXR5cGVkJztcbnBhdGhzLmZsb3dUeXBlZEdpdElnbm9yZSA9IGAke3BhdGhzLmZsb3dUeXBlZH0vLmdpdGlnbm9yZWA7XG5wYXRocy5jb25maWdzID0gJ2NvbmZpZyc7XG5wYXRocy5wYWNrYWdlSnNvbiA9ICdwYWNrYWdlLmpzb24nO1xucGF0aHMubGF1bmNoSnNvbiA9ICcudnNjb2RlL2xhdW5jaC5qc29uJztcbnBhdGhzLmxhdW5jaEpzb25EaXN0ID0gJy52c2NvZGUvbGF1bmNoLmRpc3QuanNvbic7XG5wYXRocy5lbnYgPSAnLmVudic7XG5wYXRocy5lbnZEaXN0ID0gJ2Rpc3QuZW52JztcbnBhdGhzLmdpdFByb2plY3REaXIgPSAnLmdpdCc7XG5wYXRocy5naXRJZ25vcmUgPSAnLmdpdGlnbm9yZSc7XG5wYXRocy5wYWNrYWdlTG9ja0pzb24gPSAncGFja2FnZS1sb2NrLmpzb24nO1xucGF0aHMuc3JjID0gYCR7X19kaXJuYW1lfS9zcmNgO1xucGF0aHMuYnVpbGQgPSBgJHtfX2Rpcm5hbWV9L2J1aWxkYDtcblxucGF0aHMucmVnZW5UYXJnZXRzID0gW1xuICAgIGAke3BhdGhzLmNvbmZpZ3N9LyouanNgXG5dO1xuXG5jb25zdCBDTElfQkFOTkVSID0gYC8qKlxuKiAhISEgRE8gTk9UIEVESVQgVEhJUyBGSUxFIERJUkVDVExZICEhIVxuKiAhIFRoaXMgZmlsZSBoYXMgYmVlbiBnZW5lcmF0ZWQgYXV0b21hdGljYWxseS4gU2VlIHRoZSBjb25maWcvKi5qcyB2ZXJzaW9uIG9mXG4qICEgdGhpcyBmaWxlIHRvIG1ha2UgcGVybWFuZW50IG1vZGlmaWNhdGlvbnMhXG4qL1xcblxcbmA7XG5cbmNvbnN0IHJlYWRGaWxlQXN5bmMgPSBwcm9taXNpZnkocmVhZEZpbGUpO1xuXG4vLyAqIENMRUFOVFlQRVNcblxuY29uc3QgY2xlYW5UeXBlcyA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0YXJnZXRzID0gcGFyc2VHaXRJZ25vcmUoYXdhaXQgcmVhZEZpbGVBc3luYyhwYXRocy5mbG93VHlwZWRHaXRJZ25vcmUpKTtcblxuICAgIGxvZyhgRGVsZXRpb24gdGFyZ2V0cyBAICR7cGF0aHMuZmxvd1R5cGVkfS86IFwiJHt0YXJnZXRzLmpvaW4oJ1wiIFwiJyl9XCJgKTtcbiAgICBkZWwodGFyZ2V0cywgeyBjd2Q6IHBhdGhzLmZsb3dUeXBlZCB9KTtcbn07XG5cbmNsZWFuVHlwZXMuZGVzY3JpcHRpb24gPSBgUmVzZXRzIHRoZSAke3BhdGhzLmZsb3dUeXBlZH0gZGlyZWN0b3J5IHRvIGEgcHJpc3RpbmUgc3RhdGVgO1xuXG4vLyAqIFJFR0VORVJBVEVcblxuLy8gPyBJZiB5b3UgY2hhbmdlIHRoaXMgZnVuY3Rpb24sIHJ1biBgbnBtIHJ1biByZWdlbmVyYXRlYCB0d2ljZTogb25jZSB0b1xuLy8gPyBjb21waWxlIHRoaXMgbmV3IGZ1bmN0aW9uIGFuZCBvbmNlIGFnYWluIHRvIGNvbXBpbGUgaXRzZWxmIHdpdGggdGhlIG5ld2x5XG4vLyA/IGNvbXBpbGVkIGxvZ2ljLiBJZiB0aGVyZSBpcyBhbiBlcnJvciB0aGF0IHByZXZlbnRzIHJlZ2VuZXJhdGlvbiwgeW91IGNhblxuLy8gPyBydW4gYG5wbSBydW4gZ2VuZXJhdGVgIHRoZW4gYG5wbSBydW4gcmVnZW5lcmF0ZWAgaW5zdGVhZC5cbmNvbnN0IHJlZ2VuZXJhdGUgPSAoKSA9PiB7XG4gICAgbG9nKGBSZWdlbmVyYXRpbmcgdGFyZ2V0czogXCIke3BhdGhzLnJlZ2VuVGFyZ2V0cy5qb2luKCdcIiBcIicpfVwiYCk7XG5cbiAgICBwcm9jZXNzLmVudi5CQUJFTF9FTlYgPSAnZ2VuZXJhdG9yJztcblxuICAgIHJldHVybiBndWxwLnNyYyhwYXRocy5yZWdlblRhcmdldHMpXG4gICAgICAgICAgICAgICAucGlwZSh0YXAoZmlsZSA9PiBmaWxlLmNvbnRlbnRzID0gQnVmZmVyLmZyb20oQ0xJX0JBTk5FUiArIGJhYmVsKGZpbGUuY29udGVudHMudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgICAgICAgIHNvdXJjZUZpbGVOYW1lOiByZWxQYXRoKF9fZGlybmFtZSwgZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgfSkuY29kZSkpKVxuICAgICAgICAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCcuJykpO1xufTtcblxucmVnZW5lcmF0ZS5kZXNjcmlwdGlvbiA9ICdJbnZva2VzIGJhYmVsIG9uIHRoZSBmaWxlcyBpbiBjb25maWcsIHRyYW5zcGlsaW5nIHRoZW0gaW50byB0aGVpciBwcm9qZWN0IHJvb3QgdmVyc2lvbnMnO1xuXG4vLyAqIEJVSUxEIChwcm9kdWN0aW9uKVxuXG5jb25zdCBidWlsZCA9ICgpID0+IHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdwcm9kdWN0aW9uJztcbiAgICB3ZWJwYWNrKGNvbmZpZywgZXJyID0+IHsgaWYoZXJyKSB0aHJvdyBgV0VCUEFDSyBCVUlMRCBFUlJPUjogJHtlcnJ9YCB9KTtcbn07XG5cbmJ1aWxkLmRlc2NyaXB0aW9uID0gJ1lpZWxkcyB0aGUgYnVpbHQgZXh0ZW5zaW9uIHdpdGggYW4gYXNzdW1lZCBwcm9kdWN0aW9uIGVudmlyb25tZW50JztcblxuLy8gKiBXUERFVlNFUlZcblxuY29uc3Qgd3BkZXZzZXJ2ID0gKCkgPT4ge1xuICAgIC8vIGZsb3ctZGlzYWJsZS1saW5lXG4gICAgT2JqZWN0LmtleXMoY29uZmlnLmVudHJ5KS5mb3JFYWNoKGVudHJ5S2V5ID0+IGNvbmZpZy5lbnRyeVtlbnRyeUtleV0gPSBbXG4gICAgICAgIGB3ZWJwYWNrLWRldi1zZXJ2ZXIvY2xpZW50P2h0dHA6Ly8wLjAuMC4wOiR7REVWX1BPUlR9YCxcbiAgICAgICAgJ3dlYnBhY2svaG90L2Rldi1zZXJ2ZXInLFxuICAgICAgICBjb25maWcuZW50cnlbZW50cnlLZXldXG4gICAgXSk7XG5cbiAgICBjb25maWcucGx1Z2lucyA9IFtcbiAgICAgICAgbmV3IHdlYnBhY2suSG90TW9kdWxlUmVwbGFjZW1lbnRQbHVnaW4oKSxcbiAgICAgICAgLi4uKGNvbmZpZy5wbHVnaW5zID8/IFtdKVxuICAgIF07XG5cbiAgICBjb25zdCBwYWNrZXIgPSB3ZWJwYWNrKGNvbmZpZyk7XG4gICAgY29uc3Qgc2VydmVyID0gbmV3IHdlYnBhY2tEZXZTZXJ2ZXIocGFja2VyLCB7XG4gICAgICAgIGhvdDogdHJ1ZSxcbiAgICAgICAgY29udGVudEJhc2U6IHBhdGhzLmJ1aWxkLFxuICAgICAgICBoZWFkZXJzOiB7ICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicgfVxuICAgIH0pO1xuXG4gICAgc2VydmVyLmxpc3RlbihERVZfUE9SVCwgJzAuMC4wLjAnLCBlcnIgPT4geyBpZihlcnIpIHRocm93IGBXRUJQQUNLLURFVi1TRVJWRVIgRVJST1I6ICR7ZXJyfWAgfSk7XG59O1xuXG53cGRldnNlcnYuZGVzY3JpcHRpb24gPSAnTGF1bmNoZXMgdGhlIFdlYnBhY2sgRGV2ZWxvcG1lbnQgU2VydmVyIGZvciB0ZXN0aW5nIHB1cnBvc2VzJztcblxuZXhwb3J0IHsgcmVnZW5lcmF0ZSwgY2xlYW5UeXBlcywgd3BkZXZzZXJ2LCBidWlsZCB9O1xuIl19