/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/

"use strict";

require("source-map-support/register");

var _package = _interopRequireDefault(require("./package"));

var _webpack = _interopRequireDefault(require("webpack"));

var _path = require("path");

var _cleanWebpackPlugin = require("clean-webpack-plugin");

var _copyWebpackPlugin = _interopRequireDefault(require("copy-webpack-plugin"));

var _htmlWebpackPlugin = _interopRequireDefault(require("html-webpack-plugin"));

var _writeFileWebpackPlugin = _interopRequireDefault(require("write-file-webpack-plugin"));

var _parseGitignore = _interopRequireDefault(require("parse-gitignore"));

var _fs = require("fs");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('dotenv').config();

const {
  HASHING_ALGORITHM
} = process.env;
const paths = {};
paths.src = `${__dirname}/src`;
paths.gitIgnore = `${__dirname}/.gitignore`;
paths.build = `${__dirname}/build`;
paths.buildAssets = `${paths.build}/assets`;
paths.manifest = `${paths.src}/manifest.json`;
paths.components = `${paths.src}/components`;
paths.universe = `${paths.src}/universe`;
paths.assets = `${paths.src}/assets`;
const assetExtensions = ['jpg', 'jpeg', 'png', `gif`, "eot", 'otf', 'svg', 'ttf', 'woff', 'woff2'];

const configure = NODE_ENV => {
  const DEV_ENV = NODE_ENV === 'development';
  const options = {};
  options.mode = DEV_ENV ? 'development' : 'production';
  options.entry = {
    background: [`${paths.components}/background/index.js`],
    options: [`${paths.components}/options/index.js`],
    popup: [`${paths.components}/popup/index.js`]
  };
  options.output = {
    path: paths.build,
    filename: '[name].packed.js'
  };
  options.module = {
    rules: [{
      test: /\.css$/,
      loader: 'style-loader!css-loader',
      exclude: /node_modules/
    }, {
      test: new RegExp(`\\.(${assetExtensions.join('|')})$`),
      loader: 'file-loader?name=[name].[ext]',
      exclude: /node_modules/
    }, {
      test: /\.html$/,
      loader: 'html-loader',
      exclude: /node_modules/
    }, {
      test: /\.js$/,
      loader: 'babel-loader?cacheDirectory',
      exclude: /node_modules/
    }]
  };
  options.plugins = [new _cleanWebpackPlugin.CleanWebpackPlugin(), new _webpack.default.DefinePlugin({
    'process.env.NODE_ENV': JSON.stringify(NODE_ENV),
    'process.env.HASHING_ALGORITHM': JSON.stringify(HASHING_ALGORITHM)
  }), new _copyWebpackPlugin.default([{
    from: paths.manifest,
    transform: content => Buffer.from(JSON.stringify({
      name: `${DEV_ENV ? "DEV-" : ''}${_package.default.name}`,
      description: _package.default.description,
      version: _package.default.version,
      'content_security_policy': `script-src 'self'${DEV_ENV ? " 'unsafe-eval'" : ''}; object-src 'self'`,
      ...JSON.parse(content.toString())
    }))
  }]), new _copyWebpackPlugin.default([{
    from: `${paths.assets}/icon/**/*.png`,
    to: `${paths.buildAssets}/icon/[1]`,
    test: /.*\/icon\/(.*)$/
  }]), new _htmlWebpackPlugin.default({
    template: `${paths.src}/popup.html`,
    filename: 'popup.html',
    chunks: ['popup']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/options.html`,
    filename: 'options.html',
    chunks: ['options']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/background.html`,
    filename: 'background.html',
    chunks: ['background']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/welcome.html`,
    filename: 'welcome.html'
  }), new _writeFileWebpackPlugin.default()];
  options.resolve = {};
  options.resolve.alias = {
    'components': paths.components,
    'universe': paths.universe
  };
  if (DEV_ENV) options.devtool = 'cheap-module-eval-source-map';

  if (NODE_ENV !== 'generator') {
    options.resolve.mainFields = ['browser', 'main'];
  }

  return options;
};

module.exports = env => configure(env.NODE_ENV);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy93ZWJwYWNrLmNvbmZpZy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiSEFTSElOR19BTEdPUklUSE0iLCJwcm9jZXNzIiwiZW52IiwicGF0aHMiLCJzcmMiLCJfX2Rpcm5hbWUiLCJnaXRJZ25vcmUiLCJidWlsZCIsImJ1aWxkQXNzZXRzIiwibWFuaWZlc3QiLCJjb21wb25lbnRzIiwidW5pdmVyc2UiLCJhc3NldHMiLCJhc3NldEV4dGVuc2lvbnMiLCJjb25maWd1cmUiLCJOT0RFX0VOViIsIkRFVl9FTlYiLCJvcHRpb25zIiwibW9kZSIsImVudHJ5IiwiYmFja2dyb3VuZCIsInBvcHVwIiwib3V0cHV0IiwicGF0aCIsImZpbGVuYW1lIiwibW9kdWxlIiwicnVsZXMiLCJ0ZXN0IiwibG9hZGVyIiwiZXhjbHVkZSIsIlJlZ0V4cCIsImpvaW4iLCJwbHVnaW5zIiwiQ2xlYW5XZWJwYWNrUGx1Z2luIiwid2VicGFjayIsIkRlZmluZVBsdWdpbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJDb3B5V2VicGFja1BsdWdpbiIsImZyb20iLCJ0cmFuc2Zvcm0iLCJjb250ZW50IiwiQnVmZmVyIiwibmFtZSIsInBrZyIsImRlc2NyaXB0aW9uIiwidmVyc2lvbiIsInBhcnNlIiwidG9TdHJpbmciLCJ0byIsIkh0bWxXZWJwYWNrUGx1Z2luIiwidGVtcGxhdGUiLCJjaHVua3MiLCJXcml0ZUZpbGVXZWJwYWNrUGx1Z2luIiwicmVzb2x2ZSIsImFsaWFzIiwiZGV2dG9vbCIsIm1haW5GaWVsZHMiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEI7O0FBRUEsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQXdCQyxPQUFPLENBQUNDLEdBQXRDO0FBRUEsTUFBTUMsS0FBSyxHQUFHLEVB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LDBCQUFKLENBQXNCO0FBQ2xCQyxJQUFBQSxRQUFRLEVBQUcsR0FBRWhELEtBQUssQ0FBQ0MsR0FBSSxrQkFETDtBQUVsQm9CLElBQUFBLFFBQVEsRUFBRSxpQkFGUTtBQUdsQjRCLElBQUFBLE1BQU0sRUFBRSxDQUFDLFlBQUQ7QUFIVSxHQUF0QixDQXpDYyxFQStDZCxJQUFJRiwwQkFBSixDQUFzQjtBQUNsQkMsSUFBQUEsUUFBUSxFQUFHLEdBQUVoRCxLQUFLLENBQUNDLEdBQUksZUFETDtBQUVsQm9CLElBQUFBLFFBQVEsRUFBRTtBQUZRLEdBQXRCLENBL0NjLEVBb0RkLElBQUk2QiwrQkFBSixFQXBEYyxDQUFsQjtBQXVEQXBDLEVBQUFBLE9BQU8sQ0FBQ3FDLE9BQVIsR0FBa0IsRUFBbEI7QUFLQXJDLEVBQUFBLE9BQU8sQ0FBQ3FDLE9BQVIsQ0FBZ0JDLEtBQWhCLEdBQXdCO0FBQ3BCLGtCQUFjcEQsS0FBSyxDQUFDTyxVQURBO0FBRXBCLGdCQUFZUCxLQUFLLENBQUNRO0FBRkUsR0FBeEI7QUFNQSxNQUFHSyxPQUFILEVBQ0lDLE9BQU8sQ0FBQ3VDLE9BQVIsR0FBa0IsOEJBQWxCOztBQUVKLE1BQUd6QyxRQUFRLEtBQUssV0FBaEIsRUFDQTtBQUVJRSxJQUFBQSxPQUFPLENBQUNxQyxPQUFSLENBQWdCRyxVQUFoQixHQUE2QixDQUFDLFNBQUQsRUFBWSxNQUFaLENBQTdCO0FBQ0g7O0FBRUQsU0FBT3hDLE9BQVA7QUFDSCxDQXRIRDs7QUF3SEFRLE1BQU0sQ0FBQ2lDLE9BQVAsR0FBa0J4RCxHQUFELElBQWdDWSxTQUFTLENBQUNaLEdBQUcsQ0FBQ2EsUUFBTCxDQUExRCIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbi8vIGZsb3ctZGlzYWJsZS1saW5lXG5pbXBvcnQgcGtnIGZyb20gJy4vcGFja2FnZSdcbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5pbXBvcnQgeyBqb2luIGFzIGpvaW5QYXRoIH0gZnJvbSAncGF0aCdcbmltcG9ydCB7IENsZWFuV2VicGFja1BsdWdpbiB9IGZyb20gJ2NsZWFuLXdlYnBhY2stcGx1Z2luJ1xuaW1wb3J0IENvcHlXZWJwYWNrUGx1Z2luIGZyb20gJ2NvcHktd2VicGFjay1wbHVnaW4nXG5pbXBvcnQgSHRtbFdlYnBhY2tQbHVnaW4gZnJvbSAnaHRtbC13ZWJwYWNrLXBsdWdpbidcbmltcG9ydCBXcml0ZUZpbGVXZWJwYWNrUGx1Z2luIGZyb20gJ3dyaXRlLWZpbGUtd2VicGFjay1wbHVnaW4nXG5pbXBvcnQgcGFyc2VHaXRJZ25vcmUgZnJvbSAncGFyc2UtZ2l0aWdub3JlJ1xuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnXG5cbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5jb25zdCB7IEhBU0hJTkdfQUxHT1JJVEhNIH0gPSBwcm9jZXNzLmVudjtcblxuY29uc3QgcGF0aHMgPSB7fTtcblxucGF0aHMuc3JjID0gYCR7X19kaXJuYW1lfS9zcmNgO1xucGF0aHMuZ2l0SWdub3JlID0gYCR7X19kaXJuYW1lfS8uZ2l0aWdub3JlYDtcbnBhdGhzLmJ1aWxkID0gYCR7X19kaXJuYW1lfS9idWlsZGA7XG5wYXRocy5idWlsZEFzc2V0cyA9IGAke3BhdGhzLmJ1aWxkfS9hc3NldHNgO1xucGF0aHMubWFuaWZlc3QgPSBgJHtwYXRocy5zcmN9L21hbmlmZXN0Lmpzb25gO1xucGF0aHMuY29tcG9uZW50cyA9IGAke3BhdGhzLnNyY30vY29tcG9uZW50c2A7XG5wYXRocy51bml2ZXJzZSA9IGAke3BhdGhzLnNyY30vdW5pdmVyc2VgO1xucGF0aHMuYXNzZXRzID0gYCR7cGF0aHMuc3JjfS9hc3NldHNgO1xuY29uc3QgYXNzZXRFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCBgZ2lmYCwgXCJlb3RcIiwgJ290ZicsICdzdmcnLCAndHRmJywgJ3dvZmYnLCAnd29mZjInXTtcblxuY29uc3QgY29uZmlndXJlID0gKE5PREVfRU5WOiA/c3RyaW5nKSA9PiB7XG4gICAgY29uc3QgREVWX0VOViA9IE5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgIG9wdGlvbnMubW9kZSA9IERFVl9FTlYgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nO1xuXG4gICAgb3B0aW9ucy5lbnRyeSA9IHtcbiAgICAgICAgYmFja2dyb3VuZDogW2Ake3BhdGhzLmNvbXBvbmVudHN9L2JhY2tncm91bmQvaW5kZXguanNgXSxcbiAgICAgICAgb3B0aW9uczogW2Ake3BhdGhzLmNvbXBvbmVudHN9L29wdGlvbnMvaW5kZXguanNgXSxcbiAgICAgICAgcG9wdXA6IFtgJHtwYXRocy5jb21wb25lbnRzfS9wb3B1cC9pbmRleC5qc2BdLFxuICAgIH07XG5cbiAgICBvcHRpb25zLm91dHB1dCA9IHtcbiAgICAgICAgcGF0aDogcGF0aHMuYnVpbGQsXG4gICAgICAgIGZpbGVuYW1lOiAnW25hbWVdLnBhY2tlZC5qcydcbiAgICB9O1xuXG4gICAgb3B0aW9ucy5tb2R1bGUgPSB7XG4gICAgICAgIHJ1bGVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmNzcyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogJ3N0eWxlLWxvYWRlciFjc3MtbG9hZGVyJyxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAvbm9kZV9tb2R1bGVzL1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiBuZXcgUmVnRXhwKGBcXFxcLigke2Fzc2V0RXh0ZW5zaW9ucy5qb2luKCd8Jyl9KSRgKSxcbiAgICAgICAgICAgICAgICBsb2FkZXI6ICdmaWxlLWxvYWRlcj9uYW1lPVtuYW1lXS5bZXh0XScsXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogL25vZGVfbW9kdWxlcy9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmh0bWwkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6ICdodG1sLWxvYWRlcicsXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogL25vZGVfbW9kdWxlcy9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmpzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiAnYmFiZWwtbG9hZGVyP2NhY2hlRGlyZWN0b3J5JyxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAvbm9kZV9tb2R1bGVzL1xuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcblxuICAgIG9wdGlvbnMucGx1Z2lucyA9IFtcbiAgICAgICAgLy8gPyBDbGVhbiBwYXRocy5idWlsZCAoYWRkZWQgYmVsb3cgaW5zdGVhZClcbiAgICAgICAgbmV3IENsZWFuV2VicGFja1BsdWdpbigpLFxuXG4gICAgICAgIC8vID8gRXhwb3NlIGRlc2lyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGluIHRoZSBwYWNrZWQgYnVuZGxlXG4gICAgICAgIG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbih7XG4gICAgICAgICAgICAncHJvY2Vzcy5lbnYuTk9ERV9FTlYnOiBKU09OLnN0cmluZ2lmeShOT0RFX0VOViksXG4gICAgICAgICAgICAncHJvY2Vzcy5lbnYuSEFTSElOR19BTEdPUklUSE0nOiBKU09OLnN0cmluZ2lmeShIQVNISU5HX0FMR09SSVRITSlcbiAgICAgICAgfSksXG5cbiAgICAgICAgbmV3IENvcHlXZWJwYWNrUGx1Z2luKFt7XG4gICAgICAgICAgICBmcm9tOiBwYXRocy5tYW5pZmVzdCxcblxuICAgICAgICAgICAgLy8gPyBHZW5lcmF0ZXMgb3VyIG1hbmlmZXN0IGZpbGUgdXNpbmcgaW5mbyBmcm9tIHBhY2thZ2UuanNvblxuICAgICAgICAgICAgdHJhbnNmb3JtOiBjb250ZW50ID0+IEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiBgJHtERVZfRU5WID8gXCJERVYtXCIgOiAnJ30ke3BrZy5uYW1lfWAsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHBrZy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBwa2cudmVyc2lvbixcbiAgICAgICAgICAgICAgICAnY29udGVudF9zZWN1cml0eV9wb2xpY3knOiBgc2NyaXB0LXNyYyAnc2VsZicke0RFVl9FTlYgPyBcIiAndW5zYWZlLWV2YWwnXCIgOiAnJ307IG9iamVjdC1zcmMgJ3NlbGYnYCxcbiAgICAgICAgICAgICAgICAuLi5KU09OLnBhcnNlKGNvbnRlbnQudG9TdHJpbmcoKSlcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XSksXG5cbiAgICAgICAgbmV3IENvcHlXZWJwYWNrUGx1Z2luKFt7XG4gICAgICAgICAgICBmcm9tOiBgJHtwYXRocy5hc3NldHN9L2ljb24vKiovKi5wbmdgLFxuICAgICAgICAgICAgdG86IGAke3BhdGhzLmJ1aWxkQXNzZXRzfS9pY29uL1sxXWAsXG4gICAgICAgICAgICB0ZXN0OiAvLipcXC9pY29uXFwvKC4qKSQvXG4gICAgICAgIH1dKSxcblxuICAgICAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oe1xuICAgICAgICAgICAgdGVtcGxhdGU6IGAke3BhdGhzLnNyY30vcG9wdXAuaHRtbGAsXG4gICAgICAgICAgICBmaWxlbmFtZTogJ3BvcHVwLmh0bWwnLFxuICAgICAgICAgICAgY2h1bmtzOiBbJ3BvcHVwJ11cbiAgICAgICAgfSksXG5cbiAgICAgICAgbmV3IEh0bWxXZWJwYWNrUGx1Z2luKHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiBgJHtwYXRocy5zcmN9L29wdGlvbnMuaHRtbGAsXG4gICAgICAgICAgICBmaWxlbmFtZTogJ29wdGlvbnMuaHRtbCcsXG4gICAgICAgICAgICBjaHVua3M6IFsnb3B0aW9ucyddXG4gICAgICAgIH0pLFxuXG4gICAgICAgIG5ldyBIdG1sV2VicGFja1BsdWdpbih7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogYCR7cGF0aHMuc3JjfS9iYWNrZ3JvdW5kLmh0bWxgLFxuICAgICAgICAgICAgZmlsZW5hbWU6ICdiYWNrZ3JvdW5kLmh0bWwnLFxuICAgICAgICAgICAgY2h1bmtzOiBbJ2JhY2tncm91bmQnXVxuICAgICAgICB9KSxcblxuICAgICAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oe1xuICAgICAgICAgICAgdGVtcGxhdGU6IGAke3BhdGhzLnNyY30vd2VsY29tZS5odG1sYCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAnd2VsY29tZS5odG1sJ1xuICAgICAgICB9KSxcblxuICAgICAgICBuZXcgV3JpdGVGaWxlV2VicGFja1BsdWdpbigpXG4gICAgXTtcblxuICAgIG9wdGlvbnMucmVzb2x2ZSA9IHt9O1xuXG4gICAgLy8gPyBUaGVzZSBhcmUgYWxpYXNlcyB0aGF0IGNhbiBiZSB1c2VkIGR1cmluZyBKUyBpbXBvcnQgY2FsbHNcbiAgICAvLyAhIE5vdGUgdGhhdCB5b3UgbXVzdCBhbHNvIGNoYW5nZSB0aGVzZSBzYW1lIGFsaWFzZXMgaW4gLmZsb3djb25maWdcbiAgICAvLyAhIE5vdGUgdGhhdCB5b3UgbXVzdCBhbHNvIGNoYW5nZSB0aGVzZSBzYW1lIGFsaWFzZXMgaW4gcGFja2FnZS5qc29uIChqZXN0KVxuICAgIG9wdGlvbnMucmVzb2x2ZS5hbGlhcyA9IHtcbiAgICAgICAgJ2NvbXBvbmVudHMnOiBwYXRocy5jb21wb25lbnRzLFxuICAgICAgICAndW5pdmVyc2UnOiBwYXRocy51bml2ZXJzZVxuICAgIH07XG5cbiAgICAvLyA/IFNlZTogaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL2RldnRvb2xcbiAgICBpZihERVZfRU5WKVxuICAgICAgICBvcHRpb25zLmRldnRvb2wgPSAnY2hlYXAtbW9kdWxlLWV2YWwtc291cmNlLW1hcCc7XG5cbiAgICBpZihOT0RFX0VOViAhPT0gJ2dlbmVyYXRvcicpXG4gICAge1xuICAgICAgICAvLyA/IFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2lwZnMvanMtaXBmcy1hcGkvcHVsbC83NzdcbiAgICAgICAgb3B0aW9ucy5yZXNvbHZlLm1haW5GaWVsZHMgPSBbJ2Jyb3dzZXInLCAnbWFpbiddO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZW52OiB7IE5PREVfRU5WOiA/c3RyaW5nIH0pID0+IGNvbmZpZ3VyZShlbnYuTk9ERV9FTlYpO1xuIl19