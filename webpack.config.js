/**
* !!! DO NOT EDIT THIS FILE DIRECTLY !!!
* ! This file has been generated automatically. See the config/*.js version of
* ! this file to make permanent modifications!
*/

"use strict";

require("source-map-support/register");

var _package = _interopRequireDefault(require("./package"));

var _webpack = _interopRequireDefault(require("webpack"));

var _cleanWebpackPlugin = require("clean-webpack-plugin");

var _copyWebpackPlugin = _interopRequireDefault(require("copy-webpack-plugin"));

var _htmlWebpackPlugin = _interopRequireDefault(require("html-webpack-plugin"));

var _writeFileWebpackPlugin = _interopRequireDefault(require("write-file-webpack-plugin"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('dotenv').config();

const {
  URN_PREFIX,
  HASHING_ALGORITHM,
  APPLICATION_LABEL,
  MAX_REQUEST_HISTORY,
  BASE32_URN_LENGTH
} = process.env;
const paths = {};
paths.src = `${__dirname}/src`;
paths.gitIgnore = `${__dirname}/.gitignore`;
paths.build = `${__dirname}/build`;
paths.buildAssets = `${paths.build}/assets`;
paths.manifest = `${paths.src}/manifest.json`;
paths.components = `${paths.src}/components`;
paths.universe = `${paths.src}/universe`;
paths.assets = `${paths.src}/assets`;
const assetExtensions = ['jpg', 'jpeg', 'png', `gif`, "eot", 'otf', 'svg', 'ttf', 'woff', 'woff2'];

const configure = NODE_ENV => {
  NODE_ENV = NODE_ENV || 'production';
  const DEV_ENV = NODE_ENV === 'development';
  const options = {};
  options.mode = DEV_ENV ? 'development' : 'production';
  options.entry = {
    background: [`${paths.components}/background/index.js`],
    options: [`${paths.components}/options/index.js`],
    popup: [`${paths.components}/popup/index.js`]
  };
  options.output = {
    path: paths.build,
    filename: '[name].packed.js'
  };
  options.module = {
    rules: [{
      test: /\.css$/,
      loader: 'style-loader!css-loader',
      exclude: /node_modules/
    }, {
      test: new RegExp(`\\.(${assetExtensions.join('|')})$`),
      loader: 'file-loader?name=[name].[ext]',
      exclude: /node_modules/
    }, {
      test: /\.html$/,
      loader: 'html-loader',
      exclude: /node_modules/
    }, {
      test: /\.js$/,
      loader: 'babel-loader?cacheDirectory',
      exclude: /node_modules/
    }]
  };
  options.plugins = [new _cleanWebpackPlugin.CleanWebpackPlugin(), new _webpack.default.DefinePlugin({
    _NODE_ENV: JSON.stringify(NODE_ENV),
    _HASHING_ALGORITHM: JSON.stringify(HASHING_ALGORITHM || 'SHA-256'),
    _APPLICATION_LABEL: JSON.stringify(APPLICATION_LABEL || '_haschk'),
    _MAX_REQUEST_HISTORY: JSON.stringify(MAX_REQUEST_HISTORY || 1000),
    _BASE32_URN_LENGTH: JSON.stringify(BASE32_URN_LENGTH || 112),
    _URN_PREFIX: JSON.stringify(URN_PREFIX || '::::')
  }), new _copyWebpackPlugin.default([{
    from: paths.manifest,
    transform: content => Buffer.from(JSON.stringify({
      name: `${DEV_ENV ? "DEV-" : ''}${_package.default.name}`,
      description: _package.default.description,
      version: _package.default.version,
      'content_security_policy': `script-src 'self'${DEV_ENV ? " 'unsafe-eval'" : ''}; object-src 'self'`,
      ...JSON.parse(content.toString())
    }))
  }]), new _copyWebpackPlugin.default([{
    from: `${paths.assets}/icon/**/*.png`,
    to: `${paths.buildAssets}/icon/[1]`,
    test: /.*\/icon\/(.*)$/
  }]), new _htmlWebpackPlugin.default({
    template: `${paths.src}/popup.html`,
    filename: 'popup.html',
    chunks: ['popup']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/options.html`,
    filename: 'options.html',
    chunks: ['options']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/background.html`,
    filename: 'background.html',
    chunks: ['background']
  }), new _htmlWebpackPlugin.default({
    template: `${paths.src}/welcome.html`,
    filename: 'welcome.html',
    chunks: []
  }), new _writeFileWebpackPlugin.default()];
  options.resolve = {};
  options.resolve.alias = {
    'components': paths.components,
    'universe': paths.universe
  };
  if (DEV_ENV) options.devtool = 'cheap-module-eval-source-map';

  if (NODE_ENV !== 'generator') {
    options.resolve.mainFields = ['browser', 'main'];
  }

  return options;
};

module.exports = env => configure(env.NODE_ENV);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy93ZWJwYWNrLmNvbmZpZy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiVVJOX1BSRUZJWCIsIkhBU0hJTkdfQUxHT1JJVEhNIiwiQVBQTElDQVRJT05fTEFCRUwiLCJNQVhfUkVRVUVTVF9ISVNUT1JZIiwiQkFTRTMyX1VSTl9MRU5HVEgiLCJwcm9jZXNzIiwiZW52IiwicGF0aHMiLCJzcmMiLCJfX2Rpcm5hbWUiLCJnaXRJZ25vcmUiLCJidWlsZCIsImJ1aWxkQXNzZXRzIiwibWFuaWZlc3QiLCJjb21wb25lbnRzIiwidW5pdmVyc2UiLCJhc3NldHMiLCJhc3NldEV4dGVuc2lvbnMiLCJjb25maWd1cmUiLCJOT0RFX0VOViIsIkRFVl9FTlYiLCJvcHRpb25zIiwibW9kZSIsImVudHJ5IiwiYmFja2dyb3VuZCIsInBvcHVwIiwib3V0cHV0IiwicGF0aCIsImZpbGVuYW1lIiwibW9kdWxlIiwicnVsZXMiLCJ0ZXN0IiwibG9hZGVyIiwiZXhjbHVkZSIsIlJlZ0V4cCIsImpvaW4iLCJwbHVnaW5zIiwiQ2xlYW5XZWJwYWNrUGx1Z2luIiwid2VicGFjayIsIkRlZmluZVBsdWdpbiIsIl9OT0RFX0VOViIsIkpTT04iLCJzdHJpbmdpZnkiLCJfSEFTSElOR19BTEdPUklUSE0iLCJfQVBQTElDQVRJT05fTEFCRUwiLCJfTUFYX1JFUVVFU1RfSElTVE9SWSIsIl9CQVNFMzJfVVJOX0xFTkdUSCIsIl9VUk5fUFJFRklYIiwiQ29weVdlYnBhY2tQbHVnaW4iLCJmcm9tIiwidHJhbnNmb3JtIiwiY29udGVudCIsIkJ1ZmZlciIsIm5hbWUiLCJwa2ciLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwYXJzZSIsInRvU3RyaW5nIiwidG8iLCJIdG1sV2VicGFja1BsdWdpbiIsInRlbXBsYXRlIiwiY2h1bmtzIiwiV3JpdGVGaWxlV2VicGFja1BsdWdpbiIsInJlc29sdmUiLCJhbGlhcyIsImRldnRvb2wiLCJtYWluRmllbGRzIiwiZXhwb3J0cyJd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SUMsK0JBQUosRUF6RGMsQ0FBbEI7QUE0REExQyxFQUFBQSxPQUFPLENBQUMyQyxPQUFSLEdBQWtCLEVBQWxCO0FBS0EzQyxFQUFBQSxPQUFPLENBQUMyQyxPQUFSLENBQWdCQyxLQUFoQixHQUF3QjtBQUNwQixrQkFBYzFELEtBQUssQ0FBQ08sVUFEQTtBQUVwQixnQkFBWVAsS0FBSyxDQUFDUTtBQUZFLEdBQXhCO0FBTUEsTUFBR0ssT0FBSCxFQUNJQyxPQUFPLENBQUM2QyxPQUFSLEdBQWtCLDhCQUFsQjs7QUFFSixNQUFHL0MsUUFBUSxLQUFLLFdBQWhCLEVBQ0E7QUFFSUUsSUFBQUEsT0FBTyxDQUFDMkMsT0FBUixDQUFnQkcsVUFBaEIsR0FBNkIsQ0FBQyxTQUFELEVBQVksTUFBWixDQUE3QjtBQUNIOztBQUVELFNBQU85QyxPQUFQO0FBQ0gsQ0E3SEQ7O0FBK0hBUSxNQUFNLENBQUN1QyxPQUFQLEdBQWtCOUQsR0FBRCxJQUFnQ1ksU0FBUyxDQUFDWixHQUFHLENBQUNhLFFBQUwsQ0FBMUQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG4vLyBmbG93LWRpc2FibGUtbGluZVxuaW1wb3J0IHBrZyBmcm9tICcuL3BhY2thZ2UnXG5pbXBvcnQgd2VicGFjayBmcm9tICd3ZWJwYWNrJ1xuaW1wb3J0IHsgQ2xlYW5XZWJwYWNrUGx1Z2luIH0gZnJvbSAnY2xlYW4td2VicGFjay1wbHVnaW4nXG5pbXBvcnQgQ29weVdlYnBhY2tQbHVnaW4gZnJvbSAnY29weS13ZWJwYWNrLXBsdWdpbidcbmltcG9ydCBIdG1sV2VicGFja1BsdWdpbiBmcm9tICdodG1sLXdlYnBhY2stcGx1Z2luJ1xuaW1wb3J0IFdyaXRlRmlsZVdlYnBhY2tQbHVnaW4gZnJvbSAnd3JpdGUtZmlsZS13ZWJwYWNrLXBsdWdpbidcblxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmNvbnN0IHtcbiAgICBVUk5fUFJFRklYLFxuICAgIEhBU0hJTkdfQUxHT1JJVEhNLFxuICAgIEFQUExJQ0FUSU9OX0xBQkVMLFxuICAgIE1BWF9SRVFVRVNUX0hJU1RPUlksXG4gICAgQkFTRTMyX1VSTl9MRU5HVEgsXG59ID0gcHJvY2Vzcy5lbnY7XG5cbmNvbnN0IHBhdGhzID0ge307XG5cbnBhdGhzLnNyYyA9IGAke19fZGlybmFtZX0vc3JjYDtcbnBhdGhzLmdpdElnbm9yZSA9IGAke19fZGlybmFtZX0vLmdpdGlnbm9yZWA7XG5wYXRocy5idWlsZCA9IGAke19fZGlybmFtZX0vYnVpbGRgO1xucGF0aHMuYnVpbGRBc3NldHMgPSBgJHtwYXRocy5idWlsZH0vYXNzZXRzYDtcbnBhdGhzLm1hbmlmZXN0ID0gYCR7cGF0aHMuc3JjfS9tYW5pZmVzdC5qc29uYDtcbnBhdGhzLmNvbXBvbmVudHMgPSBgJHtwYXRocy5zcmN9L2NvbXBvbmVudHNgO1xucGF0aHMudW5pdmVyc2UgPSBgJHtwYXRocy5zcmN9L3VuaXZlcnNlYDtcbnBhdGhzLmFzc2V0cyA9IGAke3BhdGhzLnNyY30vYXNzZXRzYDtcblxuY29uc3QgYXNzZXRFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCBgZ2lmYCwgXCJlb3RcIiwgJ290ZicsICdzdmcnLCAndHRmJywgJ3dvZmYnLCAnd29mZjInXTtcblxuY29uc3QgY29uZmlndXJlID0gKE5PREVfRU5WOiA/c3RyaW5nKSA9PiB7XG4gICAgTk9ERV9FTlYgPSBOT0RFX0VOViB8fCAncHJvZHVjdGlvbic7XG5cbiAgICBjb25zdCBERVZfRU5WID0gTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gICAgb3B0aW9ucy5tb2RlID0gREVWX0VOViA/ICdkZXZlbG9wbWVudCcgOiAncHJvZHVjdGlvbic7XG5cbiAgICBvcHRpb25zLmVudHJ5ID0ge1xuICAgICAgICBiYWNrZ3JvdW5kOiBbYCR7cGF0aHMuY29tcG9uZW50c30vYmFja2dyb3VuZC9pbmRleC5qc2BdLFxuICAgICAgICBvcHRpb25zOiBbYCR7cGF0aHMuY29tcG9uZW50c30vb3B0aW9ucy9pbmRleC5qc2BdLFxuICAgICAgICBwb3B1cDogW2Ake3BhdGhzLmNvbXBvbmVudHN9L3BvcHVwL2luZGV4LmpzYF0sXG4gICAgfTtcblxuICAgIG9wdGlvbnMub3V0cHV0ID0ge1xuICAgICAgICBwYXRoOiBwYXRocy5idWlsZCxcbiAgICAgICAgZmlsZW5hbWU6ICdbbmFtZV0ucGFja2VkLmpzJ1xuICAgIH07XG5cbiAgICBvcHRpb25zLm1vZHVsZSA9IHtcbiAgICAgICAgcnVsZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuY3NzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiAnc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXInLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGU6IC9ub2RlX21vZHVsZXMvXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IG5ldyBSZWdFeHAoYFxcXFwuKCR7YXNzZXRFeHRlbnNpb25zLmpvaW4oJ3wnKX0pJGApLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogJ2ZpbGUtbG9hZGVyP25hbWU9W25hbWVdLltleHRdJyxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAvbm9kZV9tb2R1bGVzL1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuaHRtbCQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogJ2h0bWwtbG9hZGVyJyxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAvbm9kZV9tb2R1bGVzL1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuanMkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6ICdiYWJlbC1sb2FkZXI/Y2FjaGVEaXJlY3RvcnknLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGU6IC9ub2RlX21vZHVsZXMvXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9O1xuXG4gICAgb3B0aW9ucy5wbHVnaW5zID0gW1xuICAgICAgICAvLyA/IENsZWFuIHBhdGhzLmJ1aWxkIChhZGRlZCBiZWxvdyBpbnN0ZWFkKVxuICAgICAgICBuZXcgQ2xlYW5XZWJwYWNrUGx1Z2luKCksXG5cbiAgICAgICAgLy8gPyBFeHBvc2UgZGVzaXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gdGhlIHBhY2tlZCBidW5kbGVcbiAgICAgICAgbmV3IHdlYnBhY2suRGVmaW5lUGx1Z2luKHtcbiAgICAgICAgICAgIF9OT0RFX0VOVjogSlNPTi5zdHJpbmdpZnkoTk9ERV9FTlYpLFxuICAgICAgICAgICAgX0hBU0hJTkdfQUxHT1JJVEhNOiBKU09OLnN0cmluZ2lmeShIQVNISU5HX0FMR09SSVRITSB8fCAnU0hBLTI1NicpLFxuICAgICAgICAgICAgX0FQUExJQ0FUSU9OX0xBQkVMOiBKU09OLnN0cmluZ2lmeShBUFBMSUNBVElPTl9MQUJFTCB8fCAnX2hhc2NoaycpLFxuICAgICAgICAgICAgX01BWF9SRVFVRVNUX0hJU1RPUlk6IEpTT04uc3RyaW5naWZ5KE1BWF9SRVFVRVNUX0hJU1RPUlkgfHwgMTAwMCksXG4gICAgICAgICAgICBfQkFTRTMyX1VSTl9MRU5HVEg6IEpTT04uc3RyaW5naWZ5KEJBU0UzMl9VUk5fTEVOR1RIIHx8IDExMiksXG4gICAgICAgICAgICBfVVJOX1BSRUZJWDogSlNPTi5zdHJpbmdpZnkoVVJOX1BSRUZJWCB8fCAnOjo6OicpLFxuICAgICAgICB9KSxcblxuICAgICAgICBuZXcgQ29weVdlYnBhY2tQbHVnaW4oW3tcbiAgICAgICAgICAgIGZyb206IHBhdGhzLm1hbmlmZXN0LFxuXG4gICAgICAgICAgICAvLyA/IEdlbmVyYXRlcyBvdXIgbWFuaWZlc3QgZmlsZSB1c2luZyBpbmZvIGZyb20gcGFja2FnZS5qc29uXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGNvbnRlbnQgPT4gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGAke0RFVl9FTlYgPyBcIkRFVi1cIiA6ICcnfSR7cGtnLm5hbWV9YCxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcGtnLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHBrZy52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICdjb250ZW50X3NlY3VyaXR5X3BvbGljeSc6IGBzY3JpcHQtc3JjICdzZWxmJyR7REVWX0VOViA/IFwiICd1bnNhZmUtZXZhbCdcIiA6ICcnfTsgb2JqZWN0LXNyYyAnc2VsZidgLFxuICAgICAgICAgICAgICAgIC4uLkpTT04ucGFyc2UoY29udGVudC50b1N0cmluZygpKVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH1dKSxcblxuICAgICAgICBuZXcgQ29weVdlYnBhY2tQbHVnaW4oW3tcbiAgICAgICAgICAgIGZyb206IGAke3BhdGhzLmFzc2V0c30vaWNvbi8qKi8qLnBuZ2AsXG4gICAgICAgICAgICB0bzogYCR7cGF0aHMuYnVpbGRBc3NldHN9L2ljb24vWzFdYCxcbiAgICAgICAgICAgIHRlc3Q6IC8uKlxcL2ljb25cXC8oLiopJC9cbiAgICAgICAgfV0pLFxuXG4gICAgICAgIG5ldyBIdG1sV2VicGFja1BsdWdpbih7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogYCR7cGF0aHMuc3JjfS9wb3B1cC5odG1sYCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAncG9wdXAuaHRtbCcsXG4gICAgICAgICAgICBjaHVua3M6IFsncG9wdXAnXVxuICAgICAgICB9KSxcblxuICAgICAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oe1xuICAgICAgICAgICAgdGVtcGxhdGU6IGAke3BhdGhzLnNyY30vb3B0aW9ucy5odG1sYCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAnb3B0aW9ucy5odG1sJyxcbiAgICAgICAgICAgIGNodW5rczogWydvcHRpb25zJ11cbiAgICAgICAgfSksXG5cbiAgICAgICAgbmV3IEh0bWxXZWJwYWNrUGx1Z2luKHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiBgJHtwYXRocy5zcmN9L2JhY2tncm91bmQuaHRtbGAsXG4gICAgICAgICAgICBmaWxlbmFtZTogJ2JhY2tncm91bmQuaHRtbCcsXG4gICAgICAgICAgICBjaHVua3M6IFsnYmFja2dyb3VuZCddXG4gICAgICAgIH0pLFxuXG4gICAgICAgIG5ldyBIdG1sV2VicGFja1BsdWdpbih7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogYCR7cGF0aHMuc3JjfS93ZWxjb21lLmh0bWxgLFxuICAgICAgICAgICAgZmlsZW5hbWU6ICd3ZWxjb21lLmh0bWwnLFxuICAgICAgICAgICAgY2h1bmtzOiBbXVxuICAgICAgICB9KSxcblxuICAgICAgICBuZXcgV3JpdGVGaWxlV2VicGFja1BsdWdpbigpXG4gICAgXTtcblxuICAgIG9wdGlvbnMucmVzb2x2ZSA9IHt9O1xuXG4gICAgLy8gPyBUaGVzZSBhcmUgYWxpYXNlcyB0aGF0IGNhbiBiZSB1c2VkIGR1cmluZyBKUyBpbXBvcnQgY2FsbHNcbiAgICAvLyAhIE5vdGUgdGhhdCB5b3UgbXVzdCBhbHNvIGNoYW5nZSB0aGVzZSBzYW1lIGFsaWFzZXMgaW4gLmZsb3djb25maWdcbiAgICAvLyAhIE5vdGUgdGhhdCB5b3UgbXVzdCBhbHNvIGNoYW5nZSB0aGVzZSBzYW1lIGFsaWFzZXMgaW4gcGFja2FnZS5qc29uIChqZXN0KVxuICAgIG9wdGlvbnMucmVzb2x2ZS5hbGlhcyA9IHtcbiAgICAgICAgJ2NvbXBvbmVudHMnOiBwYXRocy5jb21wb25lbnRzLFxuICAgICAgICAndW5pdmVyc2UnOiBwYXRocy51bml2ZXJzZVxuICAgIH07XG5cbiAgICAvLyA/IFNlZTogaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL2RldnRvb2xcbiAgICBpZihERVZfRU5WKVxuICAgICAgICBvcHRpb25zLmRldnRvb2wgPSAnY2hlYXAtbW9kdWxlLWV2YWwtc291cmNlLW1hcCc7XG5cbiAgICBpZihOT0RFX0VOViAhPT0gJ2dlbmVyYXRvcicpXG4gICAge1xuICAgICAgICAvLyA/IFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2lwZnMvanMtaXBmcy1hcGkvcHVsbC83NzdcbiAgICAgICAgb3B0aW9ucy5yZXNvbHZlLm1haW5GaWVsZHMgPSBbJ2Jyb3dzZXInLCAnbWFpbiddO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb25zO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZW52OiB7IE5PREVfRU5WOiA/c3RyaW5nIH0pID0+IGNvbmZpZ3VyZShlbnYuTk9ERV9FTlYpO1xuIl19