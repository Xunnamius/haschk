"use strict";

require("source-map-support/register");

var _package = _interopRequireDefault(require("./package"));

var _webpack = _interopRequireDefault(require("webpack"));

var _cleanWebpackPlugin = _interopRequireDefault(require("clean-webpack-plugin"));

var _copyWebpackPlugin = _interopRequireDefault(require("copy-webpack-plugin"));

var _htmlWebpackPlugin = _interopRequireDefault(require("html-webpack-plugin"));

var _writeFileWebpackPlugin = _interopRequireDefault(require("write-file-webpack-plugin"));

var _parseGitignore = _interopRequireDefault(require("parse-gitignore"));

var _fs = require("fs");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('dotenv').config();

const {
  NODE_ENV,
  HASHING_ALGORITHM,
  HASHING_OUTPUT_LENGTH
} = process.env;
const DEV_ENV = NODE_ENV === 'development';
const paths = {};
paths.src = `${__dirname}/src`;
paths.build = `${__dirname}/build`;
paths.buildGitIgnore = `${paths.build}/.gitignore`;
paths.srcManifest = `${paths.src}/manifest.json`;
paths.components = `${paths.src}/components`;
const assetExtensions = ['jpg', 'jpeg', 'png', `gif`, "eot", 'otf', 'svg', 'ttf', 'woff', 'woff2'];
const options = {};
options.mode = DEV_ENV ? 'development' : 'production';
options.entry = {
  background: `${paths.components}/background/index.js`,
  options: `${paths.components}/options/index.js`,
  popup: `${paths.components}/popup/index.js`
};
options.output = {
  path: paths.build,
  filename: '[name].packed.js'
};
options.module = {
  rules: [{
    test: /\.css$/,
    loader: 'style-loader!css-loader',
    exclude: /node_modules/
  }, {
    test: new RegExp(`\\.(${assetExtensions.join('|')})$`),
    loader: 'file-loader?name=[name].[ext]',
    exclude: /node_modules/
  }, {
    test: /\.html$/,
    loader: 'html-loader',
    exclude: /node_modules/
  }, {
    test: /\.js$/,
    loader: 'babel-loader?cacheDirectory',
    exclude: /node_modules/
  }]
};
options.plugins = [new _webpack.default.DefinePlugin({
  'process.env': {
    NODE_ENV: JSON.stringify(NODE_ENV),
    HASHING_ALGORITHM: JSON.stringify(HASHING_ALGORITHM),
    HASHING_OUTPUT_LENGTH: JSON.stringify(HASHING_OUTPUT_LENGTH)
  }
}), new _copyWebpackPlugin.default([{
  from: paths.srcManifest,
  transform: content => Buffer.from(JSON.stringify({
    name: `${DEV_ENV ? "DEV-" : ''}${_package.default.name}`,
    description: _package.default.description,
    version: _package.default.version,
    'content_security_policy': `script-src 'self'${DEV_ENV ? " 'unsafe-eval'" : ''}; object-src 'self'`,
    ...JSON.parse(content.toString())
  }))
}]), new _htmlWebpackPlugin.default({
  template: `${paths.src}/popup.html`,
  filename: 'popup.html',
  chunks: ['popup']
}), new _htmlWebpackPlugin.default({
  template: `${paths.src}/options.html`,
  filename: 'options.html',
  chunks: ['options']
}), new _htmlWebpackPlugin.default({
  template: `${paths.src}/background.html`,
  filename: 'background.html',
  chunks: ['background']
}), new _writeFileWebpackPlugin.default()];
if (DEV_ENV) options.devtool = 'cheap-module-eval-source-map';

if (NODE_ENV !== 'generator') {
  options.resolve = {
    mainFields: ['browser', 'main']
  };
}

const exclude = (0, _parseGitignore.default)((0, _fs.readFileSync)(paths.buildGitIgnore)).filter(path => path.startsWith('!')).map(path => path.substr(1));
options.plugins = [new _cleanWebpackPlugin.default([paths.build], {
  exclude
}), ...options.plugins];
module.exports = options;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy93ZWJwYWNrLmNvbmZpZy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiTk9ERV9FTlYiLCJIQVNISU5HX0FMR09SSVRITSIsIkhBU0hJTkdfT1VUUFVUX0xFTkdUSCIsInByb2Nlc3MiLCJlbnYiLCJERVZfRU5WIiwicGF0aHMiLCJzcmMiLCJfX2Rpcm5hbWUiLCJidWlsZCIsImJ1aWxkR2l0SWdub3JlIiwic3JjTWFuaWZlc3QiLCJjb21wb25lbnRzIiwiYXNzZXRFeHRlbnNpb25zIiwib3B0aW9ucyIsIm1vZGUiLCJlbnRyeSIsImJhY2tncm91bmQiLCJwb3B1cCIsIm91dHB1dCIsInBhdGgiLCJmaWxlbmFtZSIsIm1vZHVsZSIsInJ1bGVzIiwidGVzdCIsImxvYWRlciIsImV4Y2x1ZGUiLCJSZWdFeHAiLCJqb2luIiwicGx1Z2lucyIsIndlYnBhY2siLCJEZWZpbmVQbHVnaW4iLCJKU09OIiwic3RyaW5naWZ5IiwiQ29weVdlYnBhY2tQbHVnaW4iLCJmcm9tIiwidHJhbnNmb3JtIiwiY29udGVudCIsIkJ1ZmZlciIsIm5hbWUiLCJwa2ciLCJkZXNjcmlwdGlvbiIsInZlcnNpb24iLCJwYXJzZSIsInRvU3RyaW5nIiwiSHRtbFdlYnBhY2tQbHVnaW4iLCJ0ZW1wbGF0ZSIsImNodW5rcyIsIldyaXRlRmlsZVdlYnBhY2tQbHVnaW4iLCJkZXZ0b29sIiwicmVzb2x2ZSIsIm1haW5GaWVsZHMiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwibWFwIiwic3Vic3RyIiwiQ2xlYW5XZWJwYWNrUGx1Z2luIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUFBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCOztBQUVBLE1BQU07QUFBRUMsRUFBQUEsUUFBRjtBQUFZQyxFQUFBQSxpQkFBWjtBQUErQkMsRUFBQUE7QUFBL0IsSUFBeURD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LFNBQUQsRUFBWSxNQUFaO0FBREUsR0FBbEI7QUFHSDs7QUFFRCxNQUFNekIsT0FBTyxHQUFHLDZCQUFlLHNCQUFhcEIsS0FBSyxDQUFDSSxjQUFuQixDQUFmLEVBQ1gwQyxNQURXLENBQ0poQyxJQUFJLElBQUlBLElBQUksQ0FBQ2lDLFVBQUwsQ0FBZ0IsR0FBaEIsQ0FESixFQUVYQyxHQUZXLENBRVBsQyxJQUFJLElBQUlBLElBQUksQ0FBQ21DLE1BQUwsQ0FBWSxDQUFaLENBRkQsQ0FBaEI7QUFLQXpDLE9BQU8sQ0FBQ2UsT0FBUixHQUFrQixDQUNkLElBQUkyQiwyQkFBSixDQUF1QixDQUFDbEQsS0FBSyxDQUFDRyxLQUFQLENBQXZCLEVBQXNDO0FBQUVpQixFQUFBQTtBQUFGLENBQXRDLENBRGMsRUFFZCxHQUFHWixPQUFPLENBQUNlLE9BRkcsQ0FBbEI7QUFLQVAsTUFBTSxDQUFDbUMsT0FBUCxHQUFpQjNDLE9BQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuLy8gZmxvdy1kaXNhYmxlLWxpbmVcbmltcG9ydCBwa2cgZnJvbSAnLi9wYWNrYWdlJ1xuaW1wb3J0IHdlYnBhY2sgZnJvbSAnd2VicGFjaydcbmltcG9ydCBDbGVhbldlYnBhY2tQbHVnaW4gZnJvbSAnY2xlYW4td2VicGFjay1wbHVnaW4nXG5pbXBvcnQgQ29weVdlYnBhY2tQbHVnaW4gZnJvbSAnY29weS13ZWJwYWNrLXBsdWdpbidcbmltcG9ydCBIdG1sV2VicGFja1BsdWdpbiBmcm9tICdodG1sLXdlYnBhY2stcGx1Z2luJ1xuaW1wb3J0IFdyaXRlRmlsZVdlYnBhY2tQbHVnaW4gZnJvbSAnd3JpdGUtZmlsZS13ZWJwYWNrLXBsdWdpbidcbmltcG9ydCBwYXJzZUdpdElnbm9yZSBmcm9tICdwYXJzZS1naXRpZ25vcmUnXG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcydcblxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmNvbnN0IHsgTk9ERV9FTlYsIEhBU0hJTkdfQUxHT1JJVEhNLCBIQVNISU5HX09VVFBVVF9MRU5HVEggfSA9IHByb2Nlc3MuZW52O1xuY29uc3QgREVWX0VOViA9IE5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnO1xuXG5jb25zdCBwYXRocyA9IHt9O1xuXG5wYXRocy5zcmMgPSBgJHtfX2Rpcm5hbWV9L3NyY2A7XG5wYXRocy5idWlsZCA9IGAke19fZGlybmFtZX0vYnVpbGRgO1xucGF0aHMuYnVpbGRHaXRJZ25vcmUgPSBgJHtwYXRocy5idWlsZH0vLmdpdGlnbm9yZWA7XG5wYXRocy5zcmNNYW5pZmVzdCA9IGAke3BhdGhzLnNyY30vbWFuaWZlc3QuanNvbmA7XG5wYXRocy5jb21wb25lbnRzID0gYCR7cGF0aHMuc3JjfS9jb21wb25lbnRzYDtcblxuY29uc3QgYXNzZXRFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCBgZ2lmYCwgXCJlb3RcIiwgJ290ZicsICdzdmcnLCAndHRmJywgJ3dvZmYnLCAnd29mZjInXTtcblxuLy8gKiBXZWJwYWNrIGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuXG5jb25zdCBvcHRpb25zOiBPYmplY3QgPSB7fTtcblxub3B0aW9ucy5tb2RlID0gREVWX0VOViA/ICdkZXZlbG9wbWVudCcgOiAncHJvZHVjdGlvbic7XG5cbm9wdGlvbnMuZW50cnkgPSB7XG4gICAgYmFja2dyb3VuZDogYCR7cGF0aHMuY29tcG9uZW50c30vYmFja2dyb3VuZC9pbmRleC5qc2AsXG4gICAgb3B0aW9uczogYCR7cGF0aHMuY29tcG9uZW50c30vb3B0aW9ucy9pbmRleC5qc2AsXG4gICAgcG9wdXA6IGAke3BhdGhzLmNvbXBvbmVudHN9L3BvcHVwL2luZGV4LmpzYFxufTtcblxub3B0aW9ucy5vdXRwdXQgPSB7XG4gICAgcGF0aDogcGF0aHMuYnVpbGQsXG4gICAgZmlsZW5hbWU6ICdbbmFtZV0ucGFja2VkLmpzJ1xufTtcblxub3B0aW9ucy5tb2R1bGUgPSB7XG4gICAgcnVsZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogL1xcLmNzcyQvLFxuICAgICAgICAgICAgbG9hZGVyOiAnc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXInLFxuICAgICAgICAgICAgZXhjbHVkZTogL25vZGVfbW9kdWxlcy9cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogbmV3IFJlZ0V4cChgXFxcXC4oJHthc3NldEV4dGVuc2lvbnMuam9pbignfCcpfSkkYCksXG4gICAgICAgICAgICBsb2FkZXI6ICdmaWxlLWxvYWRlcj9uYW1lPVtuYW1lXS5bZXh0XScsXG4gICAgICAgICAgICBleGNsdWRlOiAvbm9kZV9tb2R1bGVzL1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB0ZXN0OiAvXFwuaHRtbCQvLFxuICAgICAgICAgICAgbG9hZGVyOiAnaHRtbC1sb2FkZXInLFxuICAgICAgICAgICAgZXhjbHVkZTogL25vZGVfbW9kdWxlcy9cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGVzdDogL1xcLmpzJC8sXG4gICAgICAgICAgICBsb2FkZXI6ICdiYWJlbC1sb2FkZXI/Y2FjaGVEaXJlY3RvcnknLFxuICAgICAgICAgICAgZXhjbHVkZTogL25vZGVfbW9kdWxlcy9cbiAgICAgICAgfVxuICAgIF1cbn07XG5cbm9wdGlvbnMucGx1Z2lucyA9IFtcbiAgICAvLyA/IENsZWFuIHBhdGhzLmJ1aWxkIChzZWUgYmVsb3cpXG4gICAgLy8gbmV3IENsZWFuV2VicGFja1BsdWdpbihbJ2J1aWxkJ10pLFxuXG4gICAgLy8gPyBFeHBvc2UgZGVzaXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gdGhlIHBhY2tlZCBidW5kbGVcbiAgICBuZXcgd2VicGFjay5EZWZpbmVQbHVnaW4oe1xuICAgICAgICAncHJvY2Vzcy5lbnYnOiB7XG4gICAgICAgICAgICBOT0RFX0VOVjogSlNPTi5zdHJpbmdpZnkoTk9ERV9FTlYpLFxuICAgICAgICAgICAgSEFTSElOR19BTEdPUklUSE06IEpTT04uc3RyaW5naWZ5KEhBU0hJTkdfQUxHT1JJVEhNKSxcbiAgICAgICAgICAgIEhBU0hJTkdfT1VUUFVUX0xFTkdUSDogSlNPTi5zdHJpbmdpZnkoSEFTSElOR19PVVRQVVRfTEVOR1RIKSxcbiAgICAgICAgfSxcbiAgICB9KSxcblxuICAgIG5ldyBDb3B5V2VicGFja1BsdWdpbihbe1xuICAgICAgICBmcm9tOiBwYXRocy5zcmNNYW5pZmVzdCxcblxuICAgICAgICAvLyA/IEdlbmVyYXRlcyBvdXIgbWFuaWZlc3QgZmlsZSB1c2luZyBpbmZvIGZyb20gcGFja2FnZS5qc29uXG4gICAgICAgIHRyYW5zZm9ybTogY29udGVudCA9PiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBuYW1lOiBgJHtERVZfRU5WID8gXCJERVYtXCIgOiAnJ30ke3BrZy5uYW1lfWAsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcGtnLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdmVyc2lvbjogcGtnLnZlcnNpb24sXG4gICAgICAgICAgICAnY29udGVudF9zZWN1cml0eV9wb2xpY3knOiBgc2NyaXB0LXNyYyAnc2VsZicke0RFVl9FTlYgPyBcIiAndW5zYWZlLWV2YWwnXCIgOiAnJ307IG9iamVjdC1zcmMgJ3NlbGYnYCxcbiAgICAgICAgICAgIC4uLkpTT04ucGFyc2UoY29udGVudC50b1N0cmluZygpKVxuICAgICAgICB9KSlcbiAgICB9XSksXG5cbiAgICBuZXcgSHRtbFdlYnBhY2tQbHVnaW4oe1xuICAgICAgICB0ZW1wbGF0ZTogYCR7cGF0aHMuc3JjfS9wb3B1cC5odG1sYCxcbiAgICAgICAgZmlsZW5hbWU6ICdwb3B1cC5odG1sJyxcbiAgICAgICAgY2h1bmtzOiBbJ3BvcHVwJ11cbiAgICB9KSxcblxuICAgIG5ldyBIdG1sV2VicGFja1BsdWdpbih7XG4gICAgICAgIHRlbXBsYXRlOiBgJHtwYXRocy5zcmN9L29wdGlvbnMuaHRtbGAsXG4gICAgICAgIGZpbGVuYW1lOiAnb3B0aW9ucy5odG1sJyxcbiAgICAgICAgY2h1bmtzOiBbJ29wdGlvbnMnXVxuICAgIH0pLFxuXG4gICAgbmV3IEh0bWxXZWJwYWNrUGx1Z2luKHtcbiAgICAgICAgdGVtcGxhdGU6IGAke3BhdGhzLnNyY30vYmFja2dyb3VuZC5odG1sYCxcbiAgICAgICAgZmlsZW5hbWU6ICdiYWNrZ3JvdW5kLmh0bWwnLFxuICAgICAgICBjaHVua3M6IFsnYmFja2dyb3VuZCddXG4gICAgfSksXG5cbiAgICBuZXcgV3JpdGVGaWxlV2VicGFja1BsdWdpbigpXG5dO1xuXG4vLyA/IFNlZTogaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL2RldnRvb2xcbmlmKERFVl9FTlYpXG4gICAgb3B0aW9ucy5kZXZ0b29sID0gJ2NoZWFwLW1vZHVsZS1ldmFsLXNvdXJjZS1tYXAnO1xuXG5pZihOT0RFX0VOViAhPT0gJ2dlbmVyYXRvcicpXG57XG4gICAgLy8gPyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9pcGZzL2pzLWlwZnMtYXBpL3B1bGwvNzc3XG4gICAgb3B0aW9ucy5yZXNvbHZlID0ge1xuICAgICAgICBtYWluRmllbGRzOiBbJ2Jyb3dzZXInLCAnbWFpbiddXG4gICAgfTtcbn1cblxuY29uc3QgZXhjbHVkZSA9IHBhcnNlR2l0SWdub3JlKHJlYWRGaWxlU3luYyhwYXRocy5idWlsZEdpdElnbm9yZSkpXG4gICAgLmZpbHRlcihwYXRoID0+IHBhdGguc3RhcnRzV2l0aCgnIScpKVxuICAgIC5tYXAocGF0aCA9PiBwYXRoLnN1YnN0cigxKSk7XG5cbi8vID8gVGhpcyBmb2xsb3dpbmcgaXMgbmVjZXNzYXJ5IHNvIENsZWFuV2VicGFja1BsdWdpbiBkb2Vzbid0IGtpbGwgYnVpbGQvLmdpdGlnbm9yZVxub3B0aW9ucy5wbHVnaW5zID0gW1xuICAgIG5ldyBDbGVhbldlYnBhY2tQbHVnaW4oW3BhdGhzLmJ1aWxkXSwgeyBleGNsdWRlIH0pLFxuICAgIC4uLm9wdGlvbnMucGx1Z2luc1xuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBvcHRpb25zO1xuIl19